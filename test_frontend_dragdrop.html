<!DOCTYPE html>
<html>
<head>
    <title>Test Drag & Drop</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .drop-zone {
            border: 3px dashed #ccc;
            padding: 50px;
            text-align: center;
            margin: 20px 0;
        }
        .drop-zone.drag-over {
            background: #e0e0e0;
            border-color: #333;
        }
        .log {
            background: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            max-height: 300px;
            overflow-y: auto;
        }
        .log-entry {
            margin: 5px 0;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>Test Drag & Drop de Múltiples Imágenes</h1>
    
    <div class="drop-zone" id="dropZone">
        Arrastra múltiples imágenes aquí
    </div>
    
    <div>
        <h3>Log de eventos:</h3>
        <div class="log" id="log"></div>
    </div>
    
    <div>
        <h3>Imágenes detectadas:</h3>
        <div id="images"></div>
    </div>

    <script>
        const dropZone = document.getElementById('dropZone');
        const logDiv = document.getElementById('log');
        const imagesDiv = document.getElementById('images');
        
        function log(message) {
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }
        
        ['dragover', 'dragenter'].forEach(evt => {
            dropZone.addEventListener(evt, (e) => {
                e.preventDefault();
                dropZone.classList.add('drag-over');
                log(`Event: ${evt}`);
            });
        });
        
        ['dragleave', 'drop'].forEach(evt => {
            dropZone.addEventListener(evt, () => {
                dropZone.classList.remove('drag-over');
                log(`Event: ${evt}`);
            });
        });
        
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            log('Drop event triggered!');
            
            const files = Array.from(e.dataTransfer.files);
            log(`Files dropped: ${files.length}`);
            
            imagesDiv.innerHTML = '';
            
            files.forEach((file, idx) => {
                log(`File ${idx + 1}: ${file.name} (${file.type}, ${file.size} bytes)`);
                
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (evt) => {
                        const img = document.createElement('img');
                        img.src = evt.target.result;
                        img.style.width = '100px';
                        img.style.margin = '5px';
                        img.title = file.name;
                        imagesDiv.appendChild(img);
                        log(`✓ Loaded: ${file.name}`);
                    };
                    reader.readAsDataURL(file);
                } else {
                    log(`✗ Not an image: ${file.name}`);
                }
            });
        });
        
        log('Test page loaded - ready to test drag & drop');
    </script>
</body>
</html>
